<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.22.2/sweetalert2.min.css" rel="stylesheet"/>
    <!-- <link rel="stylesheet" href="sweetalert2.min.css"> ISSO AQUI por algum motivo estava indo no req.params ????? !! << -->
</head>

<body>
    <div class="view-user p-5">
        <div id="delete-post">
            <div class="col-6 d-flex justify-content-end">
                                            <!-- Comentei esse aqui porque eu Preferi usar BUTTON, mas DÁ NA MESMA !! << -->
                    <!-- <a type="button" class="btn btn-danger align-self-end" id="delete-post-text">Deletar post</a> -->
                    <button type="button" class="btn btn-danger align-self-end" id="delete-post-text">Deletar post</button>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

        <script>
            document.getElementById('delete-post-text')?.addEventListener('click', () => {
                    Swal.fire({
                        title: 'Você quer mesmo excluir?',
                        text: "Pense bem, essa ação não pode ser revertida.",
                        type: 'question', // AQUI no .ejs é type, no .ts é icon !! <<
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Sim, desejo deletar.',
                        cancelButtonText: 'Cancelar'
                    }).then((result => {
                        if (result.value === true) {
                            const url = document.location.href
                                const IDIndex = url.indexOf('viewpost/');
                                const URL_ID = url.slice(IDIndex + 9);
                                console.log(URL_ID);
                                $.ajax({
                                    type: 'POST',
                                    url: `http://localhost:5000/myposts/viewpost/${URL_ID}`
                                    // success: () => {   Por algum motivo, o Redirecionamento NÃO funcionou, então tive que usar Embaixo !! <<
                                    //     // document.location.href = '/myposts'
                                    // }
                                });
                            Swal.fire(
                                'Deletado !',
                                'Sua postagem foi deletada com sucesso !',
                                'success'
                            ).then((result) => {
                                document.location.href = '/myposts';
                            })
                        }
                    }))
                });
        </script>

        <div class="row mb-5">
            <div class="col text-center">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Autor</th>
                            <th scope="col">Título</th>
                            <th scope="col">Publicado em</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <%- searchPost.author %>
                            </td>
                            <td>
                                <%- searchPost.title %>
                            </td>
                            <td>
                                <%- searchPost.published_in %>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="row">
                <div class="col">
                    <b>Texto</b>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <%- searchPost.text %>
                        <br>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.22.2/sweetalert2.min.js"></script>
</body>